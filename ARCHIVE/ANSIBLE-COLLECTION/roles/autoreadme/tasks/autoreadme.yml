- name: gather facts from all hosts
  ansible.builtin.setup:
  delegate_to: "{{ item }}"
  delegate_facts: true
  with_items: "{{ autoreadme_limit }}"
  ignore_unreachable: yes

- name: update local documentation
  blockinfile:
    path: "{{ playbook_dir }}/README.md"
    marker: "<!-- {mark} AUTOMATICALLY GENERATED CONTENT - AUTOREADME ROLE -->"
    block: "{{ lookup('template', autoreadme_template) }}"
